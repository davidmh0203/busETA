<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì…”í‹€ì–¸ì œì™€</title>
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <script src="/static/js/bootstrap.bundle.min.js"></script>

    <style>
        .highlight-time {
            color: #198754;
            font-weight: bold;
            animation: blink 1.5s ease-in-out infinite;
        }

        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .highlight-bus-time {
            color: #d39e00;
            font-weight: bold;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            font-weight: bold;
            font-size: 1.5rem;
        }

        .navbar-brand svg {
            width: 1.5rem;
            height: 1.5rem;
            margin-right: 0.5rem;
            fill: #0d6efd;
        }
    </style>
</head>
<body>
    <!-- ğŸ” ë„¤ë¹„ê²Œì´ì…˜ë°” -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="/home">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path fill-rule="evenodd" d="m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd"/>
                </svg>
                ì…”í‹€ì–¸ì œì™€
            </a>
            <div class="collapse navbar-collapse justify-content-end">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link" href="/signup" id="signup_link">íšŒì›ê°€ì…</a></li>
                    <li class="nav-item"><a class="nav-link" href="/signin" id="signin_link">ë¡œê·¸ì¸</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" id="signout_link">ë¡œê·¸ì•„ì›ƒ</a></li>
                    <li class="nav-item"><a class="nav-link" href="/myinfo" id="myinfo_link">íšŒì›ì •ë³´</a></li>
                    <li class="nav-item"><a class="nav-link" href="/shuttle">ì…”í‹€ì •ë³´</a></li>
                    <li class="nav-item"><a class="nav-link" href="/citybus">ë…¸ì„ ë²„ìŠ¤ì •ë³´</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- ğŸ¯ ë©”ì¸ ì„¹ì…˜ -->
    <div class="container mt-5">

        <!-- ëª©ì ì§€ ì„¤ì • -->
        <div class="mb-4">
            <div class="section-title">1. ëª©ì ì§€ ì„¤ì •</div>
            <div class="input-group">
                <input type="text" class="form-control" placeholder="ëª©ì ì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”" id="destination_input">
                <button class="btn btn-outline-secondary" type="button" id="destination_popup">ìƒì„¸ ì„¤ì •</button>
            </div>
            <div class="mt-2">
  <button class="btn btn-sm btn-outline-primary destination-btn" data-target="ì‚¼ì†¡ì—­">ì‚¼ì†¡ì—­</button>
  <button class="btn btn-sm btn-outline-primary destination-btn" data-target="ë°±ì„ì—­">ë°±ì„ì—­</button>
  <button class="btn btn-sm btn-outline-primary destination-btn" data-target="í™”ì •ì—­">í™”ì •ì—­</button>
</div>

        </div>

        <!-- ì¶”ì²œ ë£¨íŠ¸ -->
        <div class="mb-4">
            <div class="section-title">2. ì¶”ì²œ ë£¨íŠ¸</div>
            <div class="card p-3">
    <p class="card-title"><strong>{{ summary.recommended.route }}</strong>ì„ ì¶”ì²œí•´ìš”! â†’
        <span class="highlight-time">{{ summary.recommended.info.time }} ì¶œë°œ</span>
    </p>
    <p class="card-text">
        ë‚¨ì€ ì‹œê°„: {{ summary.recommended.info.minutes_left }}ë¶„
    </p>
    <a href="/recommend" class="btn btn-primary">ì¶”ì²œ ë£¨íŠ¸ ë³´ê¸°</a>
</div>
        </div>

        <!-- ë…¸ì„ ë²„ìŠ¤ ì •ë³´ -->
        <div class="mb-4">
            <div class="section-title">3. ë…¸ì„ ë²„ìŠ¤ ì •ë³´</div>
            <ul class="list-group">
                <li class="list-group-item">033ë²ˆ: <span class="highlight-bus-time">{{ summary.result_033.arriveTime }}</span></li>
                <li class="list-group-item">85ë²ˆ: <span class="highlight-bus-time">{{ summary.result_85.arriveTime }}</span></li>
            </ul>
            <a href="/routeBus" class="btn btn-primary">ë…¸ì„ ë²„ìŠ¤ ì •ë³´</a>
        </div>

        <!-- ì…”í‹€ ì •ë³´ -->
        <div class="mb-4">
            <div class="section-title">4. ì…”í‹€ ì •ë³´</div>
                <ul class="list-group">
    <li id="samsong-shuttle" class="list-group-item" style="background-color: rgba(13, 110, 253, 0.1);">
        ì‚¼ì†¡ì—­: <span style="color: #0d6efd; font-weight: 600;">{{ summary.summary.samsong.time }} ì¶œë°œ</span>
        {% if summary.recommended.route == 'ì‚¼ì†¡ì—­ ì…”í‹€' %}(ê°€ì¥ ë¹ ë¦„){% endif %}
    </li>
    <li id="baekseok-shuttle" class="list-group-item">
        ë°±ì„ì—­: {{ summary.summary.baekseok.time }} ì¶œë°œ
        {% if summary.recommended.route == 'ë°±ì„ì—­ ì…”í‹€' %}(ê°€ì¥ ë¹ ë¦„){% endif %}
    </li>
</ul>

            <a href="/shuttle" class="btn btn-primary">ì…”í‹€ ì‹œê°„í‘œ í™•ì¸</a>
        </div>

    </div>

    <script>
        document.querySelectorAll('.destination-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const destination = btn.dataset.target;

    fetch(`/api/recommend?dest=${encodeURIComponent(destination)}`)
      .then(res => res.json())
      .then(data => {
        // ì¶”ì²œ ì¹´ë“œ ì—…ë°ì´íŠ¸
        document.querySelector('.card-title').innerText = data.recommend.route + " íƒ‘ìŠ¹";
        document.querySelector('.card-text').innerHTML = `
          ${data.recommend.info.time} ì¶œë°œ<br />
          ë‚¨ì€ ì‹œê°„: ${data.recommend.info.minutes_left}ë¶„
        `;

        // ì…”í‹€ ì •ë³´ ì—…ë°ì´íŠ¸
        document.querySelector("#samsong-shuttle").innerText =
          `ì‚¼ì†¡ì—­: ${data.summary.samsong.time || '-'} ì¶œë°œ`;
        document.querySelector("#baekseok-shuttle").innerText =
          `ë°±ì„ì—­: ${data.summary.baekseok.time || '-'} ì¶œë°œ${data.recommend.route === "ë°±ì„ì—­ ì…”í‹€" ? " (ê°€ì¥ ë¹ ë¦„)" : ""}`;
      });
  });
});
    </script>

    <script src="/static/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/navbar.js"></script>
</body>
</html>
